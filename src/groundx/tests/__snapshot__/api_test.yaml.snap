'aws: api':
  1: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: layout-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: layout-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: layout-api
      template:
        metadata:
          labels:
            app: layout-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: layout-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z X.X.X.use2.cache.amazonaws.com 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: layout-config-py-map
              name: config-volume
            - configMap:
                name: layout-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  2: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: layout-api
      name: layout-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: layout-api
      type: ClusterIP
  3: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: summary-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: summary-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: summary-api
      template:
        metadata:
          labels:
            app: summary-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: summary-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z X.X.X.use2.cache.amazonaws.com 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: summary-config-py-map
              name: config-volume
            - configMap:
                name: summary-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  4: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: summary-api
      name: summary-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: summary-api
      type: ClusterIP
'default: api':
  1: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: layout-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: layout-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: layout-api
      template:
        metadata:
          labels:
            app: layout-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: layout-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: layout-config-py-map
              name: config-volume
            - configMap:
                name: layout-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  2: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: layout-api
      name: layout-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: layout-api
      type: ClusterIP
  3: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: ranker-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: ranker-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: ranker-api
      template:
        metadata:
          labels:
            app: ranker-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: ranker-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 128Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: ranker-config-py-map
              name: config-volume
            - configMap:
                name: ranker-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  4: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: ranker-api
      name: ranker-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: ranker-api
      type: ClusterIP
  5: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: summary-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: summary-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: summary-api
      template:
        metadata:
          labels:
            app: summary-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: summary-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: summary-config-py-map
              name: config-volume
            - configMap:
                name: summary-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  6: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: summary-api
      name: summary-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: summary-api
      type: ClusterIP
'empty: api':
  1: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: layout-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: layout-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: layout-api
      template:
        metadata:
          labels:
            app: layout-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: layout-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: layout-config-py-map
              name: config-volume
            - configMap:
                name: layout-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  2: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: layout-api
      name: layout-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: layout-api
      type: ClusterIP
  3: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: ranker-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: ranker-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: ranker-api
      template:
        metadata:
          labels:
            app: ranker-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: ranker-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 128Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: ranker-config-py-map
              name: config-volume
            - configMap:
                name: ranker-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  4: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: ranker-api
      name: ranker-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: ranker-api
      type: ClusterIP
  5: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: summary-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: summary-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: summary-api
      template:
        metadata:
          labels:
            app: summary-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: summary-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: summary-config-py-map
              name: config-volume
            - configMap:
                name: summary-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  6: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: summary-api
      name: summary-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: summary-api
      type: ClusterIP
'openshift: api':
  1: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: layout-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: layout-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: layout-api
      template:
        metadata:
          labels:
            app: layout-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: layout-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsNonRoot: true
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            runAsNonRoot: true
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: layout-config-py-map
              name: config-volume
            - configMap:
                name: layout-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  2: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: layout-api
      name: layout-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: layout-api
      type: ClusterIP
  3: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: ranker-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: ranker-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: ranker-api
      template:
        metadata:
          labels:
            app: ranker-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: ranker-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 128Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsNonRoot: true
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            runAsNonRoot: true
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: ranker-config-py-map
              name: config-volume
            - configMap:
                name: ranker-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  4: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: ranker-api
      name: ranker-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: ranker-api
      type: ClusterIP
  5: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: summary-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: summary-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: summary-api
      template:
        metadata:
          labels:
            app: summary-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: summary-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsNonRoot: true
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            runAsNonRoot: true
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: summary-config-py-map
              name: config-volume
            - configMap:
                name: summary-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  6: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: summary-api
      name: summary-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: summary-api
      type: ClusterIP
'minikube: api':
  1: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: layout-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: layout-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: layout-api
      template:
        metadata:
          labels:
            app: layout-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: layout-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: layout-config-py-map
              name: config-volume
            - configMap:
                name: layout-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  2: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: layout-api
      name: layout-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: layout-api
      type: ClusterIP
  3: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: ranker-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: ranker-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: ranker-api
      template:
        metadata:
          labels:
            app: ranker-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: ranker-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 128Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: ranker-config-py-map
              name: config-volume
            - configMap:
                name: ranker-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  4: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: ranker-api
      name: ranker-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: ranker-api
      type: ClusterIP
  5: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: summary-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: summary-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: summary-api
      template:
        metadata:
          labels:
            app: summary-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: summary-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: summary-config-py-map
              name: config-volume
            - configMap:
                name: summary-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  6: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: summary-api
      name: summary-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: summary-api
      type: ClusterIP
'existing: api':
  1: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: layout-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: layout-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: layout-api
      template:
        metadata:
          labels:
            app: layout-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: layout-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: layout-config-py-map
              name: config-volume
            - configMap:
                name: layout-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  2: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: layout-api
      name: layout-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: layout-api
      type: ClusterIP
  3: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: ranker-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: ranker-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: ranker-api
      template:
        metadata:
          labels:
            app: ranker-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: ranker-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 128Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: ranker-config-py-map
              name: config-volume
            - configMap:
                name: ranker-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  4: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: ranker-api
      name: ranker-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: ranker-api
      type: ClusterIP
  5: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: summary-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: summary-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: summary-api
      template:
        metadata:
          labels:
            app: summary-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: summary-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: summary-config-py-map
              name: config-volume
            - configMap:
                name: summary-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  6: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: summary-api
      name: summary-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: summary-api
      type: ClusterIP
'metadata: api':
  1: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: layout-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: layout-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: layout-api
      template:
        metadata:
          labels:
            app: layout-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: layout-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: layout-config-py-map
              name: config-volume
            - configMap:
                name: layout-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  2: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: layout-api
      name: layout-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: layout-api
      type: ClusterIP
  3: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: ranker-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: ranker-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: ranker-api
      template:
        metadata:
          labels:
            app: ranker-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: ranker-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 128Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: ranker-config-py-map
              name: config-volume
            - configMap:
                name: ranker-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  4: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: ranker-api
      name: ranker-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: ranker-api
      type: ClusterIP
  5: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: summary-api
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: summary-api
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: summary-api
      template:
        metadata:
          labels:
            app: summary-api
        spec:
          containers:
            - command:
                - /bin/bash
                - -c
                - |
                  export PYTHONPATH=/app:$PYTHONPATH && LOCAL=0 gunicorn -c /app/gunicorn_conf.py --capture-output --enable-stdio-inheritance
              env:
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
              image: public.ecr.aws/c9r4x6y5/eyelevel/python-api:latest
              imagePullPolicy: Always
              livenessProbe:
                failureThreshold: 12
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              name: summary-api
              ports:
                - containerPort: 8080
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8080
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 100m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /app/config.py
                  name: config-volume
                  subPath: config.py
                - mountPath: /app/gunicorn_conf.py
                  name: gunicorn-conf-volume
                  subPath: gunicorn_conf.py
              workingDir: /app
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:latest
              imagePullPolicy: Always
              name: wait-for-cache
          nodeSelector:
            node: eyelevel-cpu-only
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: summary-config-py-map
              name: config-volume
            - configMap:
                name: summary-gunicorn-conf-py-map
              name: gunicorn-conf-volume
  6: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: summary-api
      name: summary-api
      namespace: eyelevel
    spec:
      ports:
        - port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app: summary-api
      type: ClusterIP
