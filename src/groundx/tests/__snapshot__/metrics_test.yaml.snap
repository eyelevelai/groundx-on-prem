'aws: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: existing-service-account
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: existing-service-account
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: 740eaecf709b71eb781431c6935ab4bf40e1849ed8c30b75ab4dc77c2359d2bd
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z X.X.X.use2.cache.amazonaws.com 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z X.X.us-east-2.rds.amazonaws.com 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: existing-service-account
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'cloud: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: metrics
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: e073a652eee0ec27036adc4c8e3bacab210373c46108516ffcf746f9ece32528
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z db-cluster-haproxy-replicas.eyelevel.svc.cluster.local 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: metrics
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'default: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: metrics
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: af15a59eb31ee7e729e323b4da83cd84031bb4d1d01127a0bf0c4cd831bf20c5
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z db-cluster-haproxy-replicas.eyelevel.svc.cluster.local 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: metrics
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'disabled: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: metrics
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: 01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z db-cluster-haproxy-replicas.eyelevel.svc.cluster.local 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: metrics
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'empty: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: metrics
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: af15a59eb31ee7e729e323b4da83cd84031bb4d1d01127a0bf0c4cd831bf20c5
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z db-cluster-haproxy-replicas.eyelevel.svc.cluster.local 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: metrics
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'existing: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: metrics
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: f93fe12c9fb323efd058c262e3177101440fcdc12fb327e651530520648a80bc
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.existing.com 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z db-ro.existing.com 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: metrics
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'extract.ingest: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: metrics
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: c9fdf1c07e09583295fe05fac2d96d80162fcd4b4aa7eddb72fc7d2853b91618
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z X.X.X.use2.cache.amazonaws.com 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z X.X.us-east-2.rds.amazonaws.com 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: metrics
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'extract.oai: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: existing-service-account
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: existing-service-account
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: 09d4f19b1120ffb83178b933a05243cdbc96f15e9b1b9542e30a1eceefc99afe
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              envFrom:
                - secretRef:
                    name: eyelevel-secret-credentials
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z X.X.X.use2.cache.amazonaws.com 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z X.X.us-east-2.rds.amazonaws.com 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: existing-service-account
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'extract: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: existing-service-account
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: existing-service-account
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: 7ee1ebcc516ace10caeb6ab752bd4ff517ebe830d17218e51446407e0ceef28b
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              envFrom:
                - secretRef:
                    name: eyelevel-secret-credentials
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z X.X.X.use2.cache.amazonaws.com 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z X.X.us-east-2.rds.amazonaws.com 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: existing-service-account
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'metadata: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: existing-service-account
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: existing-service-account
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: 954ed0151c053d79ff684c5c0ef985ae4a9b17439849a9705cbfd42901c47870
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z myapp.eyelevel.svc.cluster.local 8082; do echo waiting for cache; sleep 2; done
              image: test.image:v1
              imagePullPolicy: Always
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z db-cluster-haproxy-replicas.eyelevel.svc.cluster.local 3306; do echo waiting for database; sleep 2; done
              image: test.image:v1
              imagePullPolicy: Always
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: existing-service-account
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'minikube: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: metrics
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: f44e1ff60b32dc55af0142422b4df49dac9ef7ffe99fdcf7c01c20c3a469212d
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsGroup: 1001
                runAsNonRoot: true
                runAsUser: 1001
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z db-cluster-haproxy-replicas.eyelevel.svc.cluster.local 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            fsGroup: 1001
            fsGroupChangePolicy: OnRootMismatch
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: metrics
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'openshift: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: metrics
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: f44e1ff60b32dc55af0142422b4df49dac9ef7ffe99fdcf7c01c20c3a469212d
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-cpu-only
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-cpu-only
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsNonRoot: true
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z db-cluster-haproxy-replicas.eyelevel.svc.cluster.local 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: IfNotPresent
              name: wait-for-database
          securityContext:
            runAsNonRoot: true
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: metrics
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-cpu-only
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-cpu-only
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
'phoenix: golang':
  1: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
  2: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - watch
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - watch
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-reader
      namespace: eyelevel
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: metrics-reader
    subjects:
      - kind: ServiceAccount
        name: metrics
        namespace: eyelevel
  4: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics
      namespace: eyelevel
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: metrics
      template:
        metadata:
          annotations:
            config-hash: d765ba649f35f9bc5b9b445cd6c4ce74f53ecdec85159e28ba24a8c7849fc23b
          labels:
            app: metrics
        spec:
          affinity:
            nodeAffinity:
              requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                  - matchExpressions:
                      - key: node
                        operator: In
                        values:
                          - eyelevel-gpu
                  - matchExpressions:
                      - key: eyelevel_node
                        operator: In
                        values:
                          - eyelevel-gpu
          containers:
            - env:
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: TLS_CERT_FILE
                  value: /etc/ssl/tls/tls.crt
                - name: TLS_KEY_FILE
                  value: /etc/ssl/tls/tls.key
                - name: TLS_CA_FILE
                  value: /etc/ssl/tls/ca.crt
                - name: LISTEN_PORT
                  value: "8443"
              image: public.ecr.aws/c9r4x6y5/eyelevel/metrics:0.1.0
              imagePullPolicy: Always
              livenessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 30
                periodSeconds: 30
              name: metrics
              ports:
                - containerPort: 8443
                  protocol: TCP
              readinessProbe:
                httpGet:
                  path: /health
                  port: 8443
                  scheme: HTTPS
                initialDelaySeconds: 10
                periodSeconds: 30
              resources:
                requests:
                  cpu: 50m
                  memory: 64Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                runAsNonRoot: true
                seccompProfile:
                  type: RuntimeDefault
              volumeMounts:
                - mountPath: /home/golang/.cashbot/config.yaml
                  name: config-volume
                  subPath: config.yaml
                - mountPath: /etc/ssl/tls
                  name: tls-volume
                  readOnly: true
          imagePullSecrets:
            - name: ecr-public-pull
          initContainers:
            - command:
                - sh
                - -c
                - until nc -z cache.eyelevel.svc.cluster.local 6379; do echo waiting for cache; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: Always
              name: wait-for-cache
            - command:
                - sh
                - -c
                - until nc -z db-ro.existing.com 3306; do echo waiting for database; sleep 2; done
              image: public.ecr.aws/c9r4x6y5/eyelevel/busybox:1.0.0
              imagePullPolicy: Always
              name: wait-for-database
          securityContext:
            runAsNonRoot: true
            seccompProfile:
              type: RuntimeDefault
          serviceAccountName: metrics
          tolerations:
            - effect: NoSchedule
              key: node
              value: eyelevel-gpu
            - effect: NoSchedule
              key: eyelevel_node
              value: eyelevel-gpu
          volumes:
            - configMap:
                name: config-yaml-map
              name: config-volume
            - name: tls-volume
              secret:
                secretName: metrics-tls
  5: |
    apiVersion: v1
    data: null
    kind: Secret
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: metrics-tls
      namespace: eyelevel
    type: kubernetes.io/tls
  6: |
    apiVersion: apiregistration.k8s.io/v1
    kind: APIService
    metadata:
      labels:
        app: metrics
        appVersion: 0.1.0
        chart: groundx-0.1.0
        heritage: Helm
        version: 0.1.0
      name: v1beta1.external.metrics.k8s.io
    spec:
      group: external.metrics.k8s.io
      groupPriorityMinimum: 100
      insecureSkipTLSVerify: true
      service:
        name: metrics
        namespace: eyelevel
        port: 443
      version: v1beta1
      versionPriority: 100
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app: metrics
      name: metrics
      namespace: eyelevel
    spec:
      ports:
        - port: 443
          protocol: TCP
          targetPort: 8443
      selector:
        app: metrics
      type: ClusterIP
