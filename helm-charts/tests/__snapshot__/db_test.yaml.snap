db_cluster.yaml:
  1: |
    apiVersion: pxc.percona.com/v1
    kind: PerconaXtraDBCluster
    metadata:
      annotations:
        helm.sh/hook: post-install,post-upgrade
        helm.sh/hook-delete-policy: before-hook-creation
        helm.sh/hook-weight: "10"
      labels:
        app: db-cluster
        appVersion: 0.1.0
        chart: groundx-"0.1.0"
        heritage: Helm
        version: 0.1.0
      name: db-cluster
      namespace: eyelevel
    spec:
      backup:
        enabled: false
        nodeSelector:
          node: eyelevel-cpu-only
      haproxy:
        enabled: true
        nodeSelector:
          node: eyelevel-cpu-only
        resources:
          requests:
            cpu: 600m
            memory: 1Gi
        size: 1
      logcollector:
        enabled: false
        nodeSelector:
          node: eyelevel-cpu-only
      nodeSelector:
        node: eyelevel-cpu-only
      pmm:
        enabled: false
        nodeSelector:
          node: eyelevel-cpu-only
      proxysql:
        enabled: false
        nodeSelector:
          node: eyelevel-cpu-only
      pxc:
        nodeSelector:
          node: eyelevel-cpu-only
        persistence:
          size: 10Gi
        resources:
          requests:
            cpu: 600m
            memory: 512Mi
        size: 1
      secrets:
        passwords:
          clustercheck: password
          monitor: password
          operator: password
          proxyadmin: password
          replication: password
          root: password
          xtrabackup: password
      unsafeFlags:
        proxySize: true
        pxcSize: true
pxc-operator.yaml:
  1: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app.kubernetes.io/instance: RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: pxc-operator
        app.kubernetes.io/version: 1.18.0
        helm.sh/chart: pxc-operator-1.18.0
      name: RELEASE-NAME-pxc-operator
      namespace: NAMESPACE
    spec:
      replicas: 1
      selector:
        matchLabels:
          app.kubernetes.io/component: operator
          app.kubernetes.io/instance: RELEASE-NAME
          app.kubernetes.io/name: pxc-operator
          app.kubernetes.io/part-of: pxc-operator
      strategy:
        rollingUpdate:
          maxUnavailable: 1
        type: RollingUpdate
      template:
        metadata:
          labels:
            app.kubernetes.io/component: operator
            app.kubernetes.io/instance: RELEASE-NAME
            app.kubernetes.io/name: pxc-operator
            app.kubernetes.io/part-of: pxc-operator
        spec:
          containers:
            - command:
                - percona-xtradb-cluster-operator
              env:
                - name: WATCH_NAMESPACE
                  value: NAMESPACE
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
                - name: OPERATOR_NAME
                  value: RELEASE-NAME-pxc-operator
                - name: LOG_STRUCTURED
                  value: "false"
                - name: LOG_LEVEL
                  value: INFO
                - name: DISABLE_TELEMETRY
                  value: "false"
              image: percona/percona-xtradb-cluster-operator:1.18.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                failureThreshold: 3
                httpGet:
                  path: /metrics
                  port: metrics
                  scheme: HTTP
              name: percona-xtradb-cluster-operator
              ports:
                - containerPort: 8080
                  name: metrics
                  protocol: TCP
              resources:
                limits:
                  cpu: 200m
                  memory: 500Mi
                requests:
                  cpu: 100m
                  memory: 20Mi
          nodeSelector:
            node: eyelevel-cpu-only
          serviceAccountName: RELEASE-NAME-pxc-operator
          terminationGracePeriodSeconds: 600
